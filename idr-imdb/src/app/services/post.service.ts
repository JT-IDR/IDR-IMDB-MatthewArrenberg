import { Injectable } from '@angular/core';
import { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';
import { Observable, of } from 'rxjs';

@Injectable({
  providedIn: 'root'
})
export class PostService {

    var = [{"id":"/title/tt5491994/","chartRating":9.4},{"id":"/title/tt0903747/","chartRating":9.4},{"id":"/title/tt0795176/","chartRating":9.4},{"id":"/title/tt0185906/","chartRating":9.4},{"id":"/title/tt7366338/","chartRating":9.3},{"id":"/title/tt0306414/","chartRating":9.3},{"id":"/title/tt6769208/","chartRating":9.2},{"id":"/title/tt0417299/","chartRating":9.2},{"id":"/title/tt2395695/","chartRating":9.2},{"id":"/title/tt0141842/","chartRating":9.2},{"id":"/title/tt0081846/","chartRating":9.2},{"id":"/title/tt9253866/","chartRating":9.2},{"id":"/title/tt0944947/","chartRating":9.1},{"id":"/title/tt2861424/","chartRating":9.1},{"id":"/title/tt0071075/","chartRating":9.1},{"id":"/title/tt1355642/","chartRating":9.1},{"id":"/title/tt8420184/","chartRating":9.0},{"id":"/title/tt1533395/","chartRating":9.0},{"id":"/title/tt1475582/","chartRating":9.0},{"id":"/title/tt0052520/","chartRating":9.0},{"id":"/title/tt1877514/","chartRating":9.0},{"id":"/title/tt7678620/","chartRating":9.0},{"id":"/title/tt0103359/","chartRating":9.0},{"id":"/title/tt12392504/","chartRating":9.0},{"id":"/title/tt11126994/","chartRating":8.9},{"id":"/title/tt0296310/","chartRating":8.9},{"id":"/title/tt2560140/","chartRating":8.9},{"id":"/title/tt0386676/","chartRating":8.9},{"id":"/title/tt0303461/","chartRating":8.9},{"id":"/title/tt1806234/","chartRating":8.9},{"id":"/title/tt2092588/","chartRating":8.9},{"id":"/title/tt0877057/","chartRating":8.9},{"id":"/title/tt2098220/","chartRating":8.9},{"id":"/title/tt0081912/","chartRating":8.9},{"id":"/title/tt0098769/","chartRating":8.9},{"id":"/title/tt2356777/","chartRating":8.9},{"id":"/title/tt3032476/","chartRating":8.9},{"id":"/title/tt0098904/","chartRating":8.9},{"id":"/title/tt9735318/","chartRating":8.9},{"id":"/title/tt0092337/","chartRating":8.9},{"id":"/title/tt7920978/","chartRating":8.9},{"id":"/title/tt2802850/","chartRating":8.9},{"id":"/title/tt0213338/","chartRating":8.9},{"id":"/title/tt10541088/","chartRating":8.9},{"id":"/title/tt2297757/","chartRating":8.8},{"id":"/title/tt1865718/","chartRating":8.8},{"id":"/title/tt7137906/","chartRating":8.8},{"id":"/title/tt3530232/","chartRating":8.8},{"id":"/title/tt0108778/","chartRating":8.8},{"id":"/title/tt4742876/","chartRating":8.8},{"id":"/title/tt2571774/","chartRating":8.8},{"id":"/title/tt1508238/","chartRating":8.8},{"id":"/title/tt0063929/","chartRating":8.8},{"id":"/title/tt4934214/","chartRating":8.8},{"id":"/title/tt0472954/","chartRating":8.8},{"id":"/title/tt0081834/","chartRating":8.8},{"id":"/title/tt0264235/","chartRating":8.8},{"id":"/title/tt0200276/","chartRating":8.8},{"id":"/title/tt0112130/","chartRating":8.8},{"id":"/title/tt0072500/","chartRating":8.8},{"id":"/title/tt1831164/","chartRating":8.8},{"id":"/title/tt0193676/","chartRating":8.8},{"id":"/title/tt0096548/","chartRating":8.7},{"id":"/title/tt0098936/","chartRating":8.7},{"id":"/title/tt2085059/","chartRating":8.7},{"id":"/title/tt13675832/","chartRating":8.7},{"id":"/title/tt2707408/","chartRating":8.7},{"id":"/title/tt3398228/","chartRating":8.7},{"id":"/title/tt7660850/","chartRating":8.7},{"id":"/title/tt0353049/","chartRating":8.7},{"id":"/title/tt0214341/","chartRating":8.7},{"id":"/title/tt0121220/","chartRating":8.7},{"id":"/title/tt0074006/","chartRating":8.7},{"id":"/title/tt0388629/","chartRating":8.7},{"id":"/title/tt0121955/","chartRating":8.7},{"id":"/title/tt0384766/","chartRating":8.7},{"id":"/title/tt0248654/","chartRating":8.7},{"id":"/title/tt2442560/","chartRating":8.7},{"id":"/title/tt10986410/","chartRating":8.7},{"id":"/title/tt0118421/","chartRating":8.7},{"id":"/title/tt3718778/","chartRating":8.7},{"id":"/title/tt9432978/","chartRating":8.7},{"id":"/title/tt5753856/","chartRating":8.7},{"id":"/title/tt8111088/","chartRating":8.7},{"id":"/title/tt1910272/","chartRating":8.7},{"id":"/title/tt0367279/","chartRating":8.7},{"id":"/title/tt1190634/","chartRating":8.7},{"id":"/title/tt4508902/","chartRating":8.7},{"id":"/title/tt0096697/","chartRating":8.7},{"id":"/title/tt5687612/","chartRating":8.7},{"id":"/title/tt0286486/","chartRating":8.7},{"id":"/title/tt0412142/","chartRating":8.7},{"id":"/title/tt0407362/","chartRating":8.7},{"id":"/title/tt4574334/","chartRating":8.6},{"id":"/title/tt1606375/","chartRating":8.6},{"id":"/title/tt10530900/","chartRating":8.6},{"id":"/title/tt6741278/","chartRating":8.6},{"id":"/title/tt1518542/","chartRating":8.6},{"id":"/title/tt12004706/","chartRating":8.6},{"id":"/title/tt0804503/","chartRating":8.6},{"id":"/title/tt10233448/","chartRating":8.6},{"id":"/title/tt11280740/","chartRating":8.6},{"id":"/title/tt0387764/","chartRating":8.6},{"id":"/title/tt5788792/","chartRating":8.6},{"id":"/title/tt0092455/","chartRating":8.6},{"id":"/title/tt0086661/","chartRating":8.6},{"id":"/title/tt1856010/","chartRating":8.6},{"id":"/title/tt0758745/","chartRating":8.6},{"id":"/title/tt1628033/","chartRating":8.6},{"id":"/title/tt4786824/","chartRating":8.6},{"id":"/title/tt5712554/","chartRating":8.6},{"id":"/title/tt0318871/","chartRating":8.6},{"id":"/title/tt0459159/","chartRating":8.6},{"id":"/title/tt6025022/","chartRating":8.6},{"id":"/title/tt0158417/","chartRating":8.6},{"id":"/title/tt2303687/","chartRating":8.6},{"id":"/title/tt13991232/","chartRating":8.6},{"id":"/title/tt14392248/","chartRating":8.6},{"id":"/title/tt0111958/","chartRating":8.6},{"id":"/title/tt0348914/","chartRating":8.6},{"id":"/title/tt1266020/","chartRating":8.6},{"id":"/title/tt0106179/","chartRating":8.6},{"id":"/title/tt0773262/","chartRating":8.6},{"id":"/title/tt5555260/","chartRating":8.6},{"id":"/title/tt4299972/","chartRating":8.6},{"id":"/title/tt0988824/","chartRating":8.6},{"id":"/title/tt4288182/","chartRating":8.6},{"id":"/title/tt10332508/","chartRating":8.6},{"id":"/title/tt1795096/","chartRating":8.6},{"id":"/title/tt0994314/","chartRating":8.6},{"id":"/title/tt0088484/","chartRating":8.6},{"id":"/title/tt1733785/","chartRating":8.6},{"id":"/title/tt3322312/","chartRating":8.6},{"id":"/title/tt9335498/","chartRating":8.6},{"id":"/title/tt10638036/","chartRating":8.6},{"id":"/title/tt9140342/","chartRating":8.6},{"id":"/title/tt1486217/","chartRating":8.6},{"id":"/title/tt0094517/","chartRating":8.6},{"id":"/title/tt0268093/","chartRating":8.6},{"id":"/title/tt0434706/","chartRating":8.6},{"id":"/title/tt14986406/","chartRating":8.6},{"id":"/title/tt4236770/","chartRating":8.6},{"id":"/title/tt1305826/","chartRating":8.6},{"id":"/title/tt1641384/","chartRating":8.6},{"id":"/title/tt0096639/","chartRating":8.6},{"id":"/title/tt0090509/","chartRating":8.6},{"id":"/title/tt2049116/","chartRating":8.6},{"id":"/title/tt0092324/","chartRating":8.6},{"id":"/title/tt8595766/","chartRating":8.5},{"id":"/title/tt5290382/","chartRating":8.5},{"id":"/title/tt4834232/","chartRating":8.5},{"id":"/title/tt3398540/","chartRating":8.5},{"id":"/title/tt0380136/","chartRating":8.5},{"id":"/title/tt10802170/","chartRating":8.5},{"id":"/title/tt5421602/","chartRating":8.5},{"id":"/title/tt9174558/","chartRating":8.5},{"id":"/title/tt0096657/","chartRating":8.5},{"id":"/title/tt0094525/","chartRating":8.5},{"id":"/title/tt0080306/","chartRating":8.5},{"id":"/title/tt5189670/","chartRating":8.5},{"id":"/title/tt1489428/","chartRating":8.5},{"id":"/title/tt0979432/","chartRating":8.5},{"id":"/title/tt2244495/","chartRating":8.5},{"id":"/title/tt1870479/","chartRating":8.5},{"id":"/title/tt6763664/","chartRating":8.5},{"id":"/title/tt0053488/","chartRating":8.5},{"id":"/title/tt7562112/","chartRating":8.5},{"id":"/title/tt13616990/","chartRating":8.5},{"id":"/title/tt8289930/","chartRating":8.5},{"id":"/title/tt10048342/","chartRating":8.5},{"id":"/title/tt10850932/","chartRating":8.5},{"id":"/title/tt0863046/","chartRating":8.5},{"id":"/title/tt2100976/","chartRating":8.5},{"id":"/title/tt13111040/","chartRating":8.5},{"id":"/title/tt0275137/","chartRating":8.5},{"id":"/title/tt0088509/","chartRating":8.5},{"id":"/title/tt0280249/","chartRating":8.5},{"id":"/title/tt0237123/","chartRating":8.5},{"id":"/title/tt0417373/","chartRating":8.5},{"id":"/title/tt0187664/","chartRating":8.5},{"id":"/title/tt0106028/","chartRating":8.5},{"id":"/title/tt0314979/","chartRating":8.5},{"id":"/title/tt0229889/","chartRating":8.5},{"id":"/title/tt0403778/","chartRating":8.5},{"id":"/title/tt9544034/","chartRating":8.5},{"id":"/title/tt4063800/","chartRating":8.5},{"id":"/title/tt7908628/","chartRating":8.5},{"id":"/title/tt0086831/","chartRating":8.5},{"id":"/title/tt6108262/","chartRating":8.5},{"id":"/title/tt0423731/","chartRating":8.5},{"id":"/title/tt0487831/","chartRating":8.5},{"id":"/title/tt1492966/","chartRating":8.5},{"id":"/title/tt0129690/","chartRating":8.5},{"id":"/title/tt4158110/","chartRating":8.5},{"id":"/title/tt0290978/","chartRating":8.5},{"id":"/title/tt4647692/","chartRating":8.5},{"id":"/title/tt1513168/","chartRating":8.5},{"id":"/title/tt0163507/","chartRating":8.5},{"id":"/title/tt0475784/","chartRating":8.5},{"id":"/title/tt1586680/","chartRating":8.5},{"id":"/title/tt0278238/","chartRating":8.5},{"id":"/title/tt1442449/","chartRating":8.5},{"id":"/title/tt5288312/","chartRating":8.5},{"id":"/title/tt0118273/","chartRating":8.5},{"id":"/title/tt1534360/","chartRating":8.5},{"id":"/title/tt5897304/","chartRating":8.5},{"id":"/title/tt1124373/","chartRating":8.5},{"id":"/title/tt0417349/","chartRating":8.5},{"id":"/title/tt0436992/","chartRating":8.5},{"id":"/title/tt20869502/","chartRating":8.5},{"id":"/title/tt0421357/","chartRating":8.5},{"id":"/title/tt0112159/","chartRating":8.5},{"id":"/title/tt2701582/","chartRating":8.5},{"id":"/title/tt4082744/","chartRating":8.5},{"id":"/title/tt0290988/","chartRating":8.5},{"id":"/title/tt2575988/","chartRating":8.5},{"id":"/title/tt4093826/","chartRating":8.5},{"id":"/title/tt0120570/","chartRating":8.5},{"id":"/title/tt12343534/","chartRating":8.5},{"id":"/title/tt1758429/","chartRating":8.5},{"id":"/title/tt0203082/","chartRating":8.5},{"id":"/title/tt0149460/","chartRating":8.5},{"id":"/title/tt11198330/","chartRating":8.5},{"id":"/title/tt7221388/","chartRating":8.5},{"id":"/title/tt2243973/","chartRating":8.5},{"id":"/title/tt4269716/","chartRating":8.4},{"id":"/title/tt3526078/","chartRating":8.4},{"id":"/title/tt1439629/","chartRating":8.4},{"id":"/title/tt3230854/","chartRating":8.4},{"id":"/title/tt7472896/","chartRating":8.4},{"id":"/title/tt1710308/","chartRating":8.4},{"id":"/title/tt4295140/","chartRating":8.4},{"id":"/title/tt0995832/","chartRating":8.4},{"id":"/title/tt1230180/","chartRating":8.4},{"id":"/title/tt2401256/","chartRating":8.4},{"id":"/title/tt0047708/","chartRating":8.4},{"id":"/title/tt7278862/","chartRating":8.4},{"id":"/title/tt2433738/","chartRating":8.4},{"id":"/title/tt3895150/","chartRating":8.4},{"id":"/title/tt3920596/","chartRating":8.4},{"id":"/title/tt1877368/","chartRating":8.4},{"id":"/title/tt2937900/","chartRating":8.4},{"id":"/title/tt7120662/","chartRating":8.4},{"id":"/title/tt1299368/","chartRating":8.4},{"id":"/title/tt0421291/","chartRating":8.4},{"id":"/title/tt0262150/","chartRating":8.4},{"id":"/title/tt6958022/","chartRating":8.4},{"id":"/title/tt0472027/","chartRating":8.4},{"id":"/title/tt0103584/","chartRating":8.4},{"id":"/title/tt0310455/","chartRating":8.4}]

  private url = 'https://imdb8.p.rapidapi.com/title/get-top-rated-tv-shows';
  private urlDetails = 'https://imdb8.p.rapidapi.com/title/get-details';
  constructor(private httpClient: HttpClient) { }

  api_key = "1dcffb1e1amsh4874d4981ec2234p13d276jsnfbe0b08c0e04";
  headers = new HttpHeaders({
      'Content-Type': 'application/json',
      'X-RapidAPI-Key': this.api_key,
      'X-RapidAPI-Host': 'imdb8.p.rapidapi.com'
      });

  getPosts(): any {
      return this.httpClient.get(this.url, { 'headers': this.headers });

      // For Testing Rate limit is killing me
      // return of(this.var);
  }



  getPostsDetails(id: string): Observable<any> {
    const params = new HttpParams().set(
      "tconst", id
    )
    return this.httpClient.get(this.urlDetails, { 'headers': this.headers, params});

    // For Testing Rate limit is killing me
    // return of({
    //   "@type": "imdb.api.title.title",
    //   "id": "/title/tt0944947/",
    //   "image": {
    //     "height": 1500,
    //     "id": "/title/tt0944947/images/rm4204167425",
    //     "url": "https://m.media-amazon.com/images/M/MV5BYTRiNDQwYzAtMzVlZS00NTI5LWJjYjUtMzkwNTUzMWMxZTllXkEyXkFqcGdeQXVyNDIzMzcwNjc@._V1_.jpg",
    //     "width": 1102
    //   },
    //   "runningTimeInMinutes": 57,
    //   "nextEpisode": "/title/tt1480055/",
    //   "numberOfEpisodes": 73,
    //   "seriesEndYear": 2019,
    //   "seriesStartYear": 2011,
    //   "title": "Game of Thrones with longer title",
    //   "titleType": "tvSeries",
    //   "year": 2011
    // })
  }


}
